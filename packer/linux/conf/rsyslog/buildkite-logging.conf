# Rsyslog configuration for Elastic CI Stack
# This routes systemd service logs to dedicated log files for collection by Ops Agent
# Similar to how AWS Elastic CI Stack routes logs to CloudWatch

# Buildkite Agent service logs
# Route buildkite-agent.service logs to /var/log/buildkite-agent.log
:programname, isequal, "buildkite-agent" /var/log/buildkite-agent.log
& stop

# Docker service logs (if Docker is installed)
# Route docker.service logs to /var/log/docker.log
:programname, isequal, "dockerd" /var/log/docker.log
:programname, isequal, "docker" /var/log/docker.log
& stop

# Preemption Monitor service logs
# Route preemption-monitor.service logs to /var/log/preemption-monitor.log
:programname, isequal, "preemption-monitor" /var/log/preemption-monitor.log
& stop

# Ops Agent logs (for troubleshooting the agent itself)
:programname, isequal, "google-cloud-ops-agent" /var/log/google-cloud-ops-agent.log
& stop
